<!DOCTYPE html>
<script src="https://cdn.tiny.cloud/1/jpqz5uexhj5hxm0hj4xorv4yg0thqqaq33uouodzrof7i7xo/tinymce/5/tinymce.min.js" referrerpolicy="origin"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<!------ Include the above in your HEAD tag ---------->
<script th:inline="javascript" th:if="${session.member}">
  const USER_SEQ = [[${session.member.seq}]];
  const USER_NAME = [[${session.member.memberName}]];
  const USER_ROLE = [[${session.member.memberRole}]];

  var socket = null;
  $(document).ready(function(){
    connectWs();
  })

  function connectWs(){
    console.log("연결");
    var ws = new SockJS('/alarm');
    socket = ws;
    ws.onopen = function (){
      console.log("open")
    };

    ws.onmessage = function (event){
      console.log("onmessage 실행")
      console.log("onmessage"+event.data);
      let htmlAlarm = '';
      $('#real-time-notice').html(event.data);
      $('#real-time-notice').css('display', 'block');

      setTimeout(function(){
        $('#real-time-notice').css('display','none');

      }, 5000);
    };
    ws.onclose = function() {
      console.log("onclose 실행")
      console.log('close');
    };
  }
</script>
<meta charset="utf-8">
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>MODU - 5000만 국민의 선택</title>
  <!--Made with love by Mutiullah Samim -->

  <!--Bootsrap 4 CDN-->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

  <!--Fontawesome CDN-->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

  <!--Custom styles-->
  <link rel="stylesheet" type="text/css" href="/../static/css/Main2.css">
</head>
<header class="masthead">
  <!-- Navigation-->
  <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
    <div class="container">
      <a class="navbar-brand" href="/../MainForm"><img src="/../static/assets/MODU.PNG" alt="..." /></a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        Menu
        <i class="fas fa-bars ms-1"></i>
      </button>

      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav text-uppercase ms-auto py-4 py-lg-0">
          <th:block th:unless="${session.member}">
            <script>
              var result = confirm("로그인이 필요한 서비스입니다.");

              if(result)
              {
                window.location.href="/../LoginForm";

              }
              else
              {
                window.location.href="/../MainForm";
              }
            </script>
          </th:block>
          <th:block th:if="${session.member}">
            <li class="nav-item"><a class="nav-link" href="#services">카테고리</a></li>
            <li class="nav-item"><a class="nav-link" href="../board/Post">커뮤니티</a></li>
            <li th:if="${session.member.memberRole} == 'Professor'" class="nav-item"><a class="nav-link" href="commission/Form">제안</a></li>
            <li th:if="${session.member.memberRole} == 'Student'" class="nav-item"><a class="nav-link" href="commission/Find">교수찾기</a></li>
            <li class="nav-item"><a class="nav-link" href="/../MyPage"><td th:text="${session.member.id}"></td>님</a></li>
            <li class="nav-item"><a class="nav-link" href="/../Logout">로그아웃</a></li>
          </th:block>
        </ul>
      </div>

    </div>

  </nav>
</header>
<script>
  tinymce.init({
    plugins : 'save',
    language: "ko",
    menubar: 'file edit view insert format tools table help',
    toolbar: 'undo redo | bold italic underline strikethrough | fontfamily fontsize blocks | alignleft aligncenter alignright alignjustify | outdent indent |  numlist bullist | forecolor backcolor removeformat | pagebreak | charmap emoticons | fullscreen  preview save print | insertfile image media template link anchor codesample | ltr rtl',
    selector: '#tinyText'
  });
</script>
<body>
<form action="../update" method="post">
  <div class="select_box">
    <select id="disable_select" name="category" required>
        <option ><span th:utext="${list.category}"></span></option>
      </optgroup>
    </select>
  </div>
  <div class="tiny_box">
    <input id="inputPcSeq" type="hidden" name="pcSeq" th:value="${list.pcSeq}">
    <input id="inputName" type="text" name="writer" readonly th:value="${session.member.memberName}"/>
    <input id="inputId" type="text" name="title" th:value="${list.title}"/>
    <textarea id="tinyText" name="content" style="width: 1000px; height: 500px;" th:utext="${list.content}"></textarea>
  </div>
</form>
</body>
<!--실시간 알림-->
<div id="real-time-notice" style="display: none">
  <div id="real-time-notice-2"></div>
</div>
</html>